<!DOCTYPE html>

<html>

<head>
    <title>Frogger</title>

    <style>
        body {
            font-family: Monospace;
            background-color: #f0f0f0;
            margin: 0px;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="score">
        <label>Punteggio:</label> <span id="scoreValue">0</span>
    </div>


    <div id="canva">

    </div>


    <script src="lib/three.min.js"></script>
    <script src="lib/stats.min.js"></script>
    <script src="scripts/sceneSetup.js"></script>
    <script src="scripts/car.js"></script>
    <script src="scripts/gameControls.js"></script>
    <script src="scripts/player.js"></script>

    <script>
        var game = (function () {
            var scene = new THREE.Scene(),
                camera,
                width = window.innerWidth,
                height = window.innerHeight - 10,
                playerBox,
                renderer = new THREE.WebGLRenderer({
                    antialias: true
                }),
                playerActive = true,
                score = 0,
                playerBox,
                controls;

            renderer.setSize(width, height);
            renderer.setClearColor(0xE0EEEE);
            renderer.shadowMapEnabled = true;
            renderer.shadowMapType = THREE.PCFSoftShadowMap;
            document.getElementById("canva").appendChild(renderer.domElement);

            camera = new THREE.PerspectiveCamera(
                50,
                width / height,
                20,
                900
            );
            scene.add(camera);

            function init() {
                resetScene();
                sceneSetup.addSceneObjects();
                car.init();
                player.createPlayer();
                gameControls.init();
                render();
            }

            function resetScene() {
                camera.position.set(0, 180, 10);
                camera.lookAt(new THREE.Vector3(0, 0, 0));
            }

            function startNewGame() {
                score = 0;
                document.getElementById("scoreValue").innerHTML = score;
            }

            function render() {
                car.update();
                car.checkForCollition();
                renderer.render(scene, camera);
                requestAnimationFrame(render);
            }

            return {
                scene: scene,
                camera: camera,
                playerBox: playerBox,
                renderer: renderer,
                init: init,
                render: render,
                controls: controls,
                playerActive: playerActive,
                resetScene: resetScene,
                score: score,
                startNewGame: startNewGame
            }

        })();

        window.onload = game.init();
    </script>




</body>

</html>